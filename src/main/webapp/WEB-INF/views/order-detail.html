<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Chi tiết đơn hàng</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen">

<div th:replace="/fragments :: header"></div>

<main class="container mx-auto py-12 px-4">
    <h1 class="text-3xl font-bold text-gray-800 mb-6">Chi tiết đơn hàng</h1>

    <div class="bg-white shadow-lg rounded-xl p-6 space-y-6">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 text-gray-700 text-sm">
            <div><strong>Mã đơn:</strong> <span th:text="${order.id}">#1</span></div>
            <div><strong>Ngày đặt:</strong> <span th:text="${#temporals.format(order.createdAt, 'dd/MM/yyyy HH:mm')}">22/07/2025</span></div>
            <div><strong>Khách hàng:</strong> <span th:text="${order.customerName}">Nguyễn Văn A</span></div>
        </div>

        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-orange-400 text-white text-sm">
            <tr>
                <th class="px-4 py-2 text-left">Tên sản phẩm</th>
                <th class="px-4 py-2 text-right">Đơn giá</th>
                <th class="px-4 py-2 text-center">Số lượng</th>
                <th class="px-4 py-2 text-right">Thành tiền</th>
            </tr>
            </thead>
            <tbody class="divide-y divide-gray-100 text-gray-700 text-sm" th:if="${order.items != null}">
            <tr th:each="item : ${order.items}">
                <td class="px-4 py-3" th:text="${item.product.name}">Tên sản phẩm</td>
                <td class="px-4 py-3 text-right" th:text="${item.product.price} + ' $'">100 $</td>
                <td class="px-4 py-3 text-center" th:text="${item.quantity}">2</td>
                <td class="px-4 py-3 text-right text-blue-600 font-semibold" th:text="${item.price} + ' $'">200 $</td>
            </tr>
            </tbody>
        </table>

        <div class="flex justify-end text-lg font-semibold text-gray-800">
            Tổng cộng:
            <span class="ml-2 text-orange-600" th:text="${#numbers.formatDecimal(order.items.stream().mapToDouble(i -> i.price).sum(), 1, 'COMMA', 2, 'POINT')} + ' $'">300 $</span>
        </div>

        <div class="pt-4">
            <a href="#" th:href="@{/orders/history}"
               class="inline-flex items-center px-5 py-2 border border-gray-300 rounded-md hover:bg-gray-100 transition text-sm text-gray-700">
                <i class="fas fa-arrow-left mr-2"></i> Quay lại
            </a>
        </div>
    </div>
</main>

</body>
</html>
